@using NGordat.IdentityServer.STS.Configuration.Interfaces;
@using NGordat.IdentityServer.STS.Services;
@inject IRootConfiguration RootConfiguration

@{
    string activeTheme = !string.IsNullOrEmpty(Context.Request.Cookies[ThemeHelpers.CookieThemeKey]) ? Context.Request.Cookies[ThemeHelpers.CookieThemeKey] : ThemeHelpers.DefaultTheme;
}

@if(activeTheme != ThemeHelpers.NoThemeKey)
{
    <link id="theme-link" rel="stylesheet" href="@string.Concat("https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.2.3/", Context.Request.Cookies[ThemeHelpers.CookieThemeKey], "/bootstrap.min.css")"
    onerror="this.onerror=null;this.href='@Url.Content(string.Concat("~/lib/bootswatch/", Context.Request.Cookies[ThemeHelpers.CookieThemeKey], "/bootstrap.min.css"))';" />
}
else
{
    <link id="theme-link"  rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"
    onerror="this.onerror=null;this.href='@Url.Content("~/lib/bootstrap/dist/css/bootstrap.min.css")';" />
}
